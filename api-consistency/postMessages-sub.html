<!DOCTYPE html>
<!--
  This is a part of the demo:
  https://mustaqahmed.github.io/user-activation-v2/api-consistency/postMessages.html
-->
<head>
  <title>User Activation v2 with postMessages: cross-origin subframe</title>
</head>

<h2>Child frame in EiraGe.github.io</h2>

<p>
  <div>Each button below sends three messages:</div>
  <div>
    <input id="button0" type="button" value="Button 0" />
    requests in first message.
  </div>
  <div>
    <input id="button1" type="button" value="Button 1" />
    requests in second message.
  </div>
  <div>
    <input id="button2" type="button" value="Button 2" />
    requests in third message.
  </div>
</p>

<script>
function sendThreeMessages(callReqIndex) {
  console.log("child frame posting messages");
  for (let i = 0; i < 3; i++) {
    let msg = (i == callReqIndex) ? "call_test_api" : ("message_" + i);
    parent.postMessage(msg, "*");
  }
}

for (let i = 0; i < 3; i++) {
  document.getElementById("button" + i)
      .addEventListener("click", () => sendThreeMessages(i));
}
</script>
